# 招聘岗位自动化抓取脚本

## 功能说明

本脚本用于自动化抓取"实习僧 (shixiseng.com)"和"前程无忧 (51job.com)"网站的招聘岗位信息，支持根据配置列表批量搜索，并将结果导出为Excel文件。

## 安装依赖

### 1. 安装Python库

```bash
pip install playwright pandas openpyxl
```

### 2. 安装Playwright浏览器组件

```bash
playwright install chromium
```

或者安装所有浏览器：

```bash
playwright install
```

## 使用方法

### 基本使用

```bash
python job_scraper_main.py
```

### 配置说明

脚本会自动读取 `job_search_configs.py` 中的配置列表。每个配置项包含：

- `keywords`: 搜索关键词列表
- `locations`: 城市列表（支持模糊地区，如"非偏远地区"、"珠三角"等）
- `grad_year`: 毕业届数（2024/2025/2026 或 None）
- `recruit_type`: 招聘类型（'校招'/'社招'/'社招/校招'）
- `notes`: 备注信息（用于过滤，如"大厂"、"四大"等）
- `company_type`: 公司类型要求（如"央国企"、"国央企"）

### 输出格式

生成的Excel文件包含以下字段：

- 公司名称
- 公司类型
- 工作地点
- 招聘类型
- 招聘对象
- 岗位(大都不限专业)
- 更新时间
- 投递截止
- 相关链接

文件命名格式：`job_hunting_results_YYYY-MM-DD.xlsx`

## 功能特性

1. **智能去重**：基于URL自动去重，避免重复数据
2. **随机休眠**：每次请求后随机等待2-5秒，模拟人类行为，降低被封IP风险
3. **城市映射**：自动将模糊地区（如"非偏远地区"、"珠三角"）转换为具体城市列表
4. **结果过滤**：
   - 央国企过滤：检查公司名称是否包含"国有"、"中国"、"集团"等关键词
   - 大厂过滤：检查是否在预定义的互联网大厂列表中
   - 四大过滤：检查是否包含"普华永道"、"德勤"、"安永"、"毕马威"
5. **Excel美化**：自动设置表头样式、列宽和行高

## 注意事项

1. **网站结构变化**：如果网站改版，可能需要更新选择器。脚本中已包含多种备选选择器以提高兼容性。

2. **反爬虫机制**：
   - 脚本使用随机User-Agent
   - 每次请求后随机休眠
   - 建议不要过于频繁运行，避免触发反爬虫机制

3. **网络环境**：确保网络连接正常，能够访问目标网站。

4. **数据准确性**：
   - 部分字段（如"公司类型"）可能无法从列表页获取，会显示为"未知"
   - "投递截止"字段通常显示为"详见链接"，需要点击链接查看详情

5. **运行时间**：由于需要遍历所有配置和城市，完整运行可能需要较长时间（取决于配置数量）。

## 故障排除

### 问题1：找不到职位列表

**原因**：网站结构可能已变化

**解决**：检查网站实际结构，更新 `search_shixiseng` 或 `search_51job` 方法中的选择器

### 问题2：被封IP

**原因**：请求过于频繁

**解决**：
- 增加 `random_sleep` 的等待时间
- 减少每次搜索的配置数量
- 使用代理IP

### 问题3：浏览器启动失败

**原因**：Playwright浏览器组件未正确安装

**解决**：重新运行 `playwright install chromium`

### 问题4：Excel文件格式错误

**原因**：openpyxl版本不兼容

**解决**：更新openpyxl版本 `pip install --upgrade openpyxl`

## 代码结构

```
job_scraper_main.py      # 主脚本文件
job_search_configs.py    # 配置列表文件
requirements.txt         # 依赖库列表
```

## 更新日志

- v1.0.0: 初始版本，支持实习僧和51job抓取

