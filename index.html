<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>海马职加 | 世界级应届生求职竞争力与战略规划报告</title>
    
    <!-- 引入核心库 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- 引入字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'ocean': '#0B1120',
                        'card': '#1E293B',
                        'sky': '#38BDF8',
                        'sky-dim': 'rgba(56, 189, 248, 0.1)',
                        'warm-orange': '#FDBA74',
                        'text-primary': '#F1F5F9',
                        'text-secondary': '#94A3B8',
                    },
                    fontFamily: {
                        'serif': ['"Noto Serif SC"', 'serif'],
                        'sans': ['"Inter"', 'sans-serif'],
                        'mono': ['"JetBrains Mono"', 'monospace'],
                    }
                }
            }
        }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: #0B1120;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(56, 189, 248, 0.05), transparent 30%), 
                radial-gradient(circle at 80% 30%, rgba(56, 189, 248, 0.03), transparent 30%);
            color: #F1F5F9;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .glass-panel {
            background: rgba(30, 41, 59, 0.75);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(51, 65, 85, 0.5);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .sky-border {
            border: 1px solid rgba(56, 189, 248, 0.3);
            transition: all 0.3s ease;
        }
        .sky-border:hover {
            border-color: rgba(56, 189, 248, 0.5);
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.15);
        }

        .scanner-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(to right, transparent, #38BDF8, transparent);
            animation: scan 2s linear infinite;
        }
        @keyframes scan {
            0% { top: 0%; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0B1120; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        .tier-s { background: rgba(56, 189, 248, 0.2); color: #38BDF8; border-color: #38BDF8; }
        .tier-a { background: rgba(129, 140, 248, 0.2); color: #818CF8; border-color: #818CF8; }
        .tier-b { background: rgba(253, 186, 116, 0.2); color: #FDBA74; border-color: #FDBA74; }
        .tier-c { background: rgba(239, 68, 68, 0.2); color: #EF4444; border-color: #EF4444; }
    </style>
</head>
<body class="antialiased min-h-screen">

    <!-- 顶部导航 -->
    <nav class="fixed top-0 w-full z-50 glass-panel border-b border-slate-700/50">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <svg class="w-8 h-8 text-sky" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"/>
                </svg>
                <span class="font-serif text-xl font-bold text-text-primary">海马职加</span>
                <span class="text-text-secondary text-sm font-mono">首席人才战略官评估系统</span>
            </div>
            <div class="text-text-secondary text-xs font-mono">
                MBB · 投行 · 互联网大厂招聘标准
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <main class="pt-32 pb-20 px-6 max-w-7xl mx-auto">
        
        <!-- Hero: 文件上传区 -->
        <section id="upload-section" class="relative z-10 transition-all duration-700">
            <div class="text-center mb-16">
                <h1 class="font-serif text-5xl md:text-6xl font-bold text-text-primary mb-4 leading-tight">
                    世界级应届生求职竞争力与战略规划报告
                </h1>
                <p class="text-text-secondary text-lg max-w-2xl mx-auto font-light mb-2 mt-4">
                    World-Class Graduate Career Competitiveness & Strategic Planning Report
                </p>
                <p class="text-text-secondary text-base max-w-3xl mx-auto mt-6">
                    基于 <span class="text-text-primary font-medium">MBB/投行/互联网大厂</span> 核心招聘官视角 · 
                    <span class="text-text-primary font-medium">6D竞争力模型</span> 数据化评估
                </p>
            </div>

            <!-- 上传框 -->
            <div class="max-w-3xl mx-auto">
                <div id="drop-zone" class="glass-panel rounded-3xl p-16 border-2 border-dashed border-slate-700/50 hover:border-sky/50 transition-all duration-300 cursor-pointer group relative overflow-hidden sky-border">
                    <input type="file" id="file-input" class="hidden" accept=".pdf">
                    
                    <div class="relative z-10 flex flex-col items-center justify-center gap-8">
                        <div class="w-24 h-24 rounded-full bg-sky-dim flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
                            <svg class="w-12 h-12 text-sky" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                            </svg>
                        </div>
                        <div class="text-center">
                            <p class="text-xl font-medium text-text-primary mb-3 group-hover:text-sky transition-colors">
                                上传简历，启动6D竞争力模型评估
                            </p>
                            <p class="text-sm text-text-secondary font-mono">
                                SUPPORT PDF ONLY · MAX 10MB
                            </p>
                        </div>
                    </div>
                    
                    <div class="absolute inset-0 bg-gradient-to-tr from-sky/5 via-transparent to-sky/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                </div>
            </div>
        </section>

        <!-- Loading: 终端分析动画 -->
        <section id="loading-section" class="hidden max-w-3xl mx-auto mt-12">
            <div class="glass-panel rounded-2xl p-8 font-mono text-sm border border-slate-700/50 shadow-2xl relative overflow-hidden h-72 flex flex-col sky-border">
                <div class="flex items-center gap-2 mb-6 border-b border-slate-800 pb-3">
                    <div class="w-3 h-3 rounded-full bg-red-500"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    <span class="ml-2 text-xs text-text-secondary">Highmark_6D_Assessment_Engine.exe</span>
                </div>
                <div id="terminal-content" class="flex-1 overflow-hidden text-sky space-y-2">
                    <!-- JS 会在这里打字 -->
                </div>
                <div class="scanner-line"></div>
            </div>
        </section>

        <!-- Report: 深度报告 Bento Grid -->
        <section id="report-section" class="hidden space-y-10">
            
            <!-- 头部状态栏 -->
            <div class="flex justify-between items-end border-b border-slate-800 pb-6">
                <div>
                    <div class="text-sky text-xs font-bold tracking-[0.2em] uppercase mb-2">Strategic Assessment Report</div>
                    <h2 class="text-4xl font-serif text-text-primary">世界级应届生求职竞争力与战略规划报告</h2>
                </div>
                <div class="text-right">
                    <div class="text-text-secondary text-xs font-mono">REPORT ID</div>
                    <div class="text-text-primary font-mono">HM-6D-2025-XXXX</div>
                </div>
            </div>

            <!-- Bento Grid 布局 -->
            <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
                
                <!-- 卡片1: 综合评分 & 评级 -->
                <div class="md:col-span-4 glass-panel rounded-3xl p-10 sky-border relative overflow-hidden">
                    <div class="text-text-secondary text-xs font-mono uppercase mb-6">Overall Competitiveness</div>
                    <div class="flex items-baseline gap-2 mb-6">
                        <span id="score-val" class="text-8xl font-serif font-bold text-text-primary tracking-tighter">0</span>
                        <span class="text-2xl text-text-secondary">/ 100</span>
                    </div>
                    <div id="tier-badge" class="mb-8 inline-block px-4 py-2 rounded-lg text-sm font-bold border tier-s">
                        CALCULATING...
                    </div>
                    <p id="summary-text" class="text-base text-text-primary leading-relaxed italic border-l-2 border-sky/50 pl-5">
                        分析中...
                    </p>
                </div>

                <!-- 卡片2: 6D竞争力雷达图 -->
                <div class="md:col-span-4 glass-panel rounded-3xl p-10 sky-border flex flex-col">
                    <div class="text-text-secondary text-xs font-mono uppercase mb-6">6-Dimension Competitiveness Model</div>
                    <div class="text-text-primary text-lg font-serif mb-6">6D竞争力模型雷达图</div>
                    <div class="flex-1 relative">
                        <canvas id="radarChart"></canvas>
                    </div>
                </div>

                <!-- 卡片3: 标杆对齐 & 同辈排位 -->
                <div class="md:col-span-4 glass-panel rounded-3xl p-10 sky-border flex flex-col justify-between">
                    <div class="text-text-secondary text-xs font-mono uppercase mb-4">Benchmark Alignment</div>
                    <div class="text-text-primary text-lg font-serif mb-8">标杆对齐分析</div>
                    
                    <div id="benchmark-content" class="mb-8 text-text-primary text-sm leading-relaxed">
                        <!-- 动态生成 -->
                    </div>

                    <div class="my-8">
                        <div class="flex justify-between text-sm mb-4">
                            <span class="text-warm-orange">淘汰区 (Bottom 30%)</span>
                            <span class="text-sky">核心区 (Top 10%)</span>
                        </div>
                        <div class="h-5 bg-slate-800 rounded-full overflow-hidden relative">
                            <div id="rank-bar" class="h-full bg-gradient-to-r from-warm-orange/60 via-indigo-500/60 to-sky w-0 transition-all duration-1000 ease-out"></div>
                            <div id="rank-marker" class="absolute top-0 w-1.5 h-full bg-sky shadow-[0_0_12px_rgba(56,189,248,0.6)] transition-all duration-1000" style="left: 0%"></div>
                        </div>
                        <div class="mt-4 text-right text-xs text-sky font-mono">
                            Based on 12,405 data points
                        </div>
                    </div>
                </div>

                <!-- 卡片4: 核心红灯项 -->
                <div class="md:col-span-6 glass-panel rounded-3xl p-10 sky-border">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-2.5 h-2.5 rounded-full bg-warm-orange animate-pulse"></div>
                        <div class="text-text-secondary text-xs font-mono uppercase">Critical Red Flags</div>
                    </div>
                    <div class="text-text-primary text-2xl font-serif mb-8">核心红灯项（Deal Breakers）</div>
                    <div id="red-flags-list" class="space-y-4">
                        <!-- 动态生成 -->
                    </div>
                </div>

                <!-- 卡片5: 目标可行性分析 -->
                <div class="md:col-span-6 glass-panel rounded-3xl p-10 sky-border">
                    <div class="text-text-secondary text-xs font-mono uppercase mb-6">Target Feasibility Analysis</div>
                    <div class="text-text-primary text-2xl font-serif mb-8">目标可行性分析</div>
                    <div id="feasibility-content" class="space-y-6">
                        <!-- 动态生成 -->
                    </div>
                </div>

                <!-- 卡片6: 简历优化建议 -->
                <div class="md:col-span-8 glass-panel rounded-3xl p-10 sky-border">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-2.5 h-2.5 rounded-full bg-sky animate-pulse"></div>
                        <div class="text-text-secondary text-xs font-mono uppercase">Resume Optimization</div>
                    </div>
                    <div class="text-text-primary text-2xl font-serif mb-8">简历竞争力深度复盘</div>
                    <div id="optimization-list" class="space-y-6">
                        <!-- 动态生成 -->
                    </div>
                </div>

                <!-- 卡片7: 战略路线图 -->
                <div class="md:col-span-4 glass-panel rounded-3xl p-10 sky-border relative overflow-hidden">
                    <div class="text-text-secondary text-xs font-mono uppercase mb-6">Strategic Roadmap</div>
                    <div class="text-text-primary text-lg font-serif mb-8">战略路线图</div>
                    <div id="roadmap-box" class="space-y-8 relative pl-6 border-l border-slate-700">
                        <!-- 动态生成 -->
                    </div>
                </div>

                <!-- 卡片8: 海马解决方案 -->
                <div class="md:col-span-12 bg-gradient-to-br from-slate-900 to-slate-950 rounded-3xl p-10 border border-sky/40 relative overflow-hidden group">
                    <div class="absolute top-0 right-0 p-6 opacity-10 group-hover:opacity-20 transition-opacity">
                        <svg class="w-40 h-40 text-sky" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7l10 5 10-5-10-5zm0 9l2.5-1.25L12 8.5l-2.5 1.25L12 11zm0 2.5l-5-2.5-5 2.5L12 22l10-8.5-5-2.5-5 2.5z"/>
                        </svg>
                    </div>
                    
                    <div class="relative z-10">
                        <div class="text-sky text-xs font-bold tracking-widest uppercase mb-4">Haima Career Solution</div>
                        <h3 class="text-text-primary text-3xl font-serif mb-6">解决方案与海马产品适配</h3>
                        
                        <div class="grid md:grid-cols-3 gap-8 mb-8">
                            <div>
                                <h4 id="solution-product" class="text-xl font-serif text-text-primary mb-4">等待诊断...</h4>
                                <p id="solution-reason" class="text-base text-text-secondary leading-relaxed mb-4">请先上传简历进行诊断。</p>
                                <div class="text-sm text-sky font-semibold">Why Now:</div>
                                <p id="solution-urgency" class="text-sm text-text-secondary mt-2">-</p>
                            </div>
                            <div>
                                <div class="text-text-secondary text-sm mb-2">Expected Outcome</div>
                                <div id="solution-outcome" class="text-lg text-text-primary font-semibold">-</div>
                            </div>
                            <div>
                                <div class="text-text-secondary text-sm mb-2">ROI Impact</div>
                                <div id="solution-roi" class="text-lg text-sky font-bold">-</div>
                            </div>
                        </div>
                        
                        <button class="bg-sky hover:bg-sky-400 text-white font-bold py-3 px-8 rounded-lg text-sm transition-all shadow-lg shadow-sky/30 flex items-center gap-2">
                            激活专家通道
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                            </svg>
                        </button>
                    </div>
                </div>

            </div>
        </section>
    </main>

    <!-- 逻辑脚本 -->
    <script>
        // ================= 配置区 =================
        const API_KEY = 'sk-9fe20e18ec704475b63fbb27c7f7b32f'; 
        
        // 初始化 PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        // ================= 核心逻辑 =================
        const fileInput = document.getElementById('file-input');
        const dropZone = document.getElementById('drop-zone');
        
        dropZone.addEventListener('click', () => fileInput.click());
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('border-sky/50', 'bg-slate-500/5');
        });
        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('border-sky/50', 'bg-slate-500/5');
        });
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('border-sky/50', 'bg-slate-500/5');
            const file = e.dataTransfer.files[0];
            if (file && file.type === 'application/pdf') handleFile(file);
            else alert('仅支持 PDF 文件');
        });
        fileInput.addEventListener('change', (e) => {
            if (e.target.files[0]) handleFile(e.target.files[0]);
        });

        async function handleFile(file) {
            document.getElementById('upload-section').classList.add('hidden');
            document.getElementById('loading-section').classList.remove('hidden');
            
            runTerminalEffect();

            try {
                const text = await parsePDF(file);
                await new Promise(r => setTimeout(r, 2000)); 
                const analysis = await analyzeWithAPI(text);
                renderReport(analysis);
                
                document.getElementById('loading-section').classList.add('hidden');
                document.getElementById('report-section').classList.remove('hidden');
                
                setTimeout(() => {
                    document.getElementById('report-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);

            } catch (error) {
                console.error(error);
                alert('分析失败：' + error.message);
                location.reload();
            }
        }

        async function parsePDF(file) {
            const arrayBuffer = await file.arrayBuffer();
            const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
            let fullText = '';
            
            for (let i = 1; i <= pdf.numPages; i++) {
                const page = await pdf.getPage(i);
                const textContent = await page.getTextContent();
                fullText += textContent.items.map(item => item.str).join(' ');
            }
            return fullText;
        }

        async function analyzeWithAPI(resumeText) {
            const API_ENDPOINT = 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions';
            const MODEL = 'qwen-plus';
            
            const systemPrompt = `你是海马职加(Haima Career)的首席人才战略官，拥有全球视野的顶级职业规划专家，熟悉海马职加的产品体系，同时曾在MBB（麦肯锡/贝恩/波士顿）、投行或互联网大厂担任过核心招聘官。你擅长通过数据化、模型化的方式，对留学生的求职竞争力进行"体检"，并提供"诊断+治疗"的一站式方案。

**核心定位**：专业且犀利，不要盲目夸奖，要指出残酷的竞争真相（Crucial Honesty），但始终传达"我们有办法解决"的信心。使用商业词汇（护城河、差异化竞争、ROI、交付物）体现战略感。

**分析框架：6D竞争力模型 (The 6-Dimension Model)**
必须严格扫描以下六个维度：
1. **学历硬通货 (Academic Hard Power)**：学校Tier、GPA、专业匹配度（是否需要弥补？）
2. **职业经历密度 (Professional Density)**：实习含金量（Big Name?）、相关性、项目深度（是打杂还是核心？）
3. **技能工具箱 (Skill Set)**：硬技能（Python/Excel/建模）与软技能（沟通/逻辑/Leadership）
4. **求职认知与准备度 (Career Maturity)**：对行业的理解深度、岗位JD的拆解能力、面试技巧
5. **人脉与资源网络 (Network & Access)**：是否有内推渠道？是否有行业导师指路？
6. **心理韧性与驱动力 (Mindset)**：抗压能力、行动力、是否存在拖延或畏难情绪

**报告输出结构（必须返回严格的 JSON 格式，不要包含 Markdown 代码块标记）**：

{
    "score": 0-100的整数,
    "tier_rating": "S / A / B / C" (综合评级),
    "summary": "建设性但犀利的综合评价（100字内，指出竞争真相但给出信心）",
    "radar_6d": [学历硬通货, 职业经历密度, 技能工具箱, 求职认知与准备度, 人脉与资源网络, 心理韧性与驱动力] (6个0-100的数字),
    "benchmark_alignment": "标杆对齐分析（例如：你的目标是中金IBD，但你的竞争对手通常拥有2份以上Big Name实习，而你只有1份宏观研究，差距明显。）",
    "ranking_percentile": 0-100的整数,
    "red_flags": [
        "核心红灯项1（Deal Breaker，如：缺少Big Name背书）",
        "核心红灯项2（如：简历描述过于执行层，缺乏Owner意识）"
    ],
    "target_feasibility": {
        "reach": "冲刺线：努把力能够到的顶级名企（如：高盛IBD）",
        "target": "核心线：最匹配的合理目标（如：中金IBD、腾讯产品）",
        "safety": "保底线：确保有书读/有班上的底线（如：四大审计、中型互联网）",
        "market_insight": "今年该赛道的宏观招聘趋势（HC缩减/扩招）"
    },
    "optimization": [
        {
            "original": "简历原句",
            "analysis": "建设性分析（指出问题但给出方向）",
            "rewrite": "具体的修改示范（完整的改写后的句子）"
        }
    ],
    "strategic_roadmap": [
        {"phase": "准备期（当前-2月）", "actions": ["动作1", "动作2"]},
        {"phase": "冲刺期（3月-5月）", "actions": ["动作1", "动作2"]},
        {"phase": "收割期（6月+）", "actions": ["动作1", "动作2"]}
    ],
    "haima_solution": {
        "product": "推荐的海马产品名（PTA远程项目实训 / 名企远程/实地人事实习 / 千里马求职全案 / 千里马至尊版(Diamond) / 行业导师1V1辅导 / 金牌文书/简历精修）",
        "diagnosis": "诊断（基于红灯项）",
        "prescription": "处方（产品如何解决）",
        "efficacy": "疗效（预计提升效果，如：简历通过率从10%提升至80%）",
        "why_now": "Why Now（结合2025春招补录/秋招提前批的时间窗口，解释为什么现在是最佳时机）",
        "roi": "ROI（投资回报率，如：投入X万，预期年薪提升Y万）"
    }
}`;

            const userPrompt = `这是候选人简历：${resumeText.substring(0, 10000)}`;

            const response = await fetch(API_ENDPOINT, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${API_KEY}`
                },
                body: JSON.stringify({
                    model: MODEL,
                    messages: [
                        { role: 'system', content: systemPrompt },
                        { role: 'user', content: userPrompt }
                    ],
                    temperature: 0.7,
                    max_tokens: 4000
                })
            });

            if (!response.ok) {
                throw new Error(`API 请求失败: ${response.status}`);
            }

            const data = await response.json();
            let rawText = '';
            
            if (data.choices && data.choices[0] && data.choices[0].message) {
                rawText = data.choices[0].message.content;
            } else {
                throw new Error('API 返回格式不正确');
            }

            rawText = rawText.trim();
            if (rawText.startsWith('```json')) {
                rawText = rawText.replace(/^```json\s*/, '').replace(/\s*```$/, '');
            } else if (rawText.startsWith('```')) {
                rawText = rawText.replace(/^```\s*/, '').replace(/\s*```$/, '');
            }
            
            return JSON.parse(rawText);
        }

        // ================= 渲染逻辑 =================
        function renderReport(data) {
            // 1. 综合评分
            animateValue("score-val", 0, data.score || 0, 1500);
            
            // 2. 评级 Badge (S/A/B/C)
            const tierEl = document.getElementById('tier-badge');
            const tier = data.tier_rating || data.tier_label || 'B';
            tierEl.innerText = `Tier ${tier}`;
            tierEl.className = 'mb-8 inline-block px-4 py-2 rounded-lg text-sm font-bold border tier-' + tier.toLowerCase();
            
            document.getElementById('summary-text').innerText = data.summary || '分析中...';

            // 3. 6D雷达图
            if (data.radar_6d && Array.isArray(data.radar_6d)) {
                initRadarChart(data.radar_6d);
            } else if (data.radar && Array.isArray(data.radar)) {
                initRadarChart(data.radar);
            }

            // 4. 标杆对齐
            if (data.benchmark_alignment) {
                document.getElementById('benchmark-content').innerHTML = `
                    <div class="bg-slate-900/60 rounded-xl p-5 text-sm text-text-primary leading-relaxed">
                        ${data.benchmark_alignment}
                    </div>
                `;
            }

            // 5. 同辈排位
            if (data.ranking_percentile !== undefined) {
                setTimeout(() => {
                    const percent = data.ranking_percentile;
                    document.getElementById('rank-marker').style.left = percent + '%';
                    document.getElementById('rank-bar').style.width = percent + '%';
                }, 500);
            }

            // 6. 核心红灯项
            if (data.red_flags && Array.isArray(data.red_flags)) {
                document.getElementById('red-flags-list').innerHTML = data.red_flags.map(flag => `
                    <div class="bg-warm-orange/10 border-l-4 border-warm-orange rounded-lg p-5">
                        <div class="text-text-primary font-semibold mb-2">⚠️ ${flag}</div>
                    </div>
                `).join('');
            }

            // 7. 目标可行性分析
            if (data.target_feasibility) {
                document.getElementById('feasibility-content').innerHTML = `
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="bg-sky/10 border border-sky/30 rounded-xl p-6">
                            <div class="text-sky text-sm font-bold mb-3">冲刺线 (Reach)</div>
                            <div class="text-text-primary text-base leading-relaxed">${data.target_feasibility.reach || '-'}</div>
                        </div>
                        <div class="bg-indigo-500/10 border border-indigo-500/30 rounded-xl p-6">
                            <div class="text-indigo-400 text-sm font-bold mb-3">核心线 (Target)</div>
                            <div class="text-text-primary text-base leading-relaxed">${data.target_feasibility.target || '-'}</div>
                        </div>
                        <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6">
                            <div class="text-text-secondary text-sm font-bold mb-3">保底线 (Safety)</div>
                            <div class="text-text-primary text-base leading-relaxed">${data.target_feasibility.safety || '-'}</div>
                        </div>
                    </div>
                    ${data.target_feasibility.market_insight ? `
                        <div class="mt-6 bg-slate-900/60 rounded-xl p-5">
                            <div class="text-text-secondary text-xs font-mono uppercase mb-2">Market Insight</div>
                            <div class="text-text-primary text-sm leading-relaxed">${data.target_feasibility.market_insight}</div>
                        </div>
                    ` : ''}
                `;
            }

            // 8. 简历优化建议
            if (data.optimization && Array.isArray(data.optimization)) {
                document.getElementById('optimization-list').innerHTML = data.optimization.map(item => `
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-6 text-sm border-b border-slate-800 pb-6 last:border-0">
                        <div class="md:col-span-5">
                            <div class="text-text-secondary text-xs font-mono uppercase mb-2">原始描述</div>
                            <div class="text-text-secondary italic leading-relaxed">"${item.original || '-'}"</div>
                        </div>
                        <div class="md:col-span-1 text-center text-sky hidden md:block text-2xl">→</div>
                        <div class="md:col-span-6">
                            <div class="text-text-secondary text-xs font-mono uppercase mb-2">优化建议</div>
                            <div class="text-text-primary mb-3 leading-relaxed">${item.analysis || '-'}</div>
                            <div class="text-sky text-xs font-mono uppercase mb-2">修改示范</div>
                            <div class="text-sky leading-relaxed">"${item.rewrite || '-'}"</div>
                        </div>
                    </div>
                `).join('');
            }

            // 9. 战略路线图
            if (data.strategic_roadmap && Array.isArray(data.strategic_roadmap)) {
                document.getElementById('roadmap-box').innerHTML = data.strategic_roadmap.map((phase, index) => `
                    <div class="relative">
                        <div class="absolute -left-[29px] top-1 w-4 h-4 rounded-full bg-sky border-2 border-slate-900 shadow-[0_0_10px_rgba(56,189,248,0.6)] ${index === 0 ? 'animate-pulse' : ''}"></div>
                        <div class="text-sky text-sm font-bold mb-2">${phase.phase || '-'}</div>
                        <div class="space-y-2">
                            ${Array.isArray(phase.actions) ? phase.actions.map(action => `
                                <div class="text-text-primary text-base leading-relaxed">• ${action}</div>
                            `).join('') : `<div class="text-text-primary text-base leading-relaxed">${phase.actions || '-'}</div>`}
                        </div>
                    </div>
                `).join('');
            } else if (data.timeline && Array.isArray(data.timeline)) {
                // 兼容旧格式
                document.getElementById('roadmap-box').innerHTML = data.timeline.map((item, index) => `
                    <div class="relative">
                        <div class="absolute -left-[29px] top-1 w-4 h-4 rounded-full bg-sky border-2 border-slate-900 shadow-[0_0_10px_rgba(56,189,248,0.6)] ${index === 0 ? 'animate-pulse' : ''}"></div>
                        <div class="text-sky text-sm font-bold mb-2">${item.time || '-'}</div>
                        <div class="text-text-primary text-base leading-relaxed">${item.action || '-'}</div>
                    </div>
                `).join('');
            }

            // 10. 海马解决方案
            if (data.haima_solution) {
                if (data.haima_solution.product) {
                    document.getElementById('solution-product').innerText = data.haima_solution.product;
                }
                if (data.haima_solution.prescription) {
                    document.getElementById('solution-reason').innerHTML = `
                        <div class="mb-3">
                            <strong class="text-text-primary">诊断：</strong>
                            <span class="text-text-secondary">${data.haima_solution.diagnosis || '-'}</span>
                        </div>
                        <div>
                            <strong class="text-text-primary">处方：</strong>
                            <span class="text-text-secondary">${data.haima_solution.prescription || '-'}</span>
                        </div>
                    `;
                }
                if (data.haima_solution.efficacy) {
                    document.getElementById('solution-outcome').innerText = data.haima_solution.efficacy;
                }
                if (data.haima_solution.why_now) {
                    document.getElementById('solution-urgency').innerText = data.haima_solution.why_now;
                }
                if (data.haima_solution.roi) {
                    document.getElementById('solution-roi').innerText = data.haima_solution.roi;
                }
            } else if (data.solution) {
                // 兼容旧格式
                if (data.solution.product) {
                    document.getElementById('solution-product').innerText = data.solution.product;
                }
                if (data.solution.reason) {
                    document.getElementById('solution-reason').innerText = data.solution.reason;
                }
                if (data.solution.expected_outcome) {
                    document.getElementById('solution-outcome').innerText = data.solution.expected_outcome;
                }
            }
        }

        // 终端打字机特效
        function runTerminalEffect() {
            const logs = [
                "> 正在连接海马人才数据库...",
                "> 启动6D竞争力模型扫描...",
                "> 分析学历硬通货维度...",
                "> 评估职业经历密度...",
                "> 检测技能工具箱完整性...",
                "> 评估求职认知与准备度...",
                "> 分析人脉与资源网络...",
                "> 评估心理韧性与驱动力...",
                "> 进行标杆对齐分析...",
                "> 生成战略路线图..."
            ];
            const container = document.getElementById('terminal-content');
            container.innerHTML = '';
            let i = 0;
            
            function typeLine() {
                if (i < logs.length) {
                    const div = document.createElement('div');
                    div.className = 'font-mono';
                    div.innerHTML = `<span class="text-sky mr-2">➜</span> ${logs[i]}`;
                    container.appendChild(div);
                    i++;
                    setTimeout(typeLine, 600);
                }
            }
            typeLine();
        }

        // 数字增长动画
        function animateValue(id, start, end, duration) {
            const obj = document.getElementById(id);
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        // 初始化6D雷达图
        function initRadarChart(dataValues) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['学历硬通货', '职业经历密度', '技能工具箱', '求职认知与准备度', '人脉与资源网络', '心理韧性与驱动力'],
                    datasets: [{
                        label: '6D竞争力模型',
                        data: dataValues,
                        backgroundColor: 'rgba(56, 189, 248, 0.2)',
                        borderColor: '#38BDF8',
                        pointBackgroundColor: '#38BDF8',
                        pointBorderColor: '#0B1120',
                        pointHoverBackgroundColor: '#0B1120',
                        pointHoverBorderColor: '#38BDF8',
                        borderWidth: 2,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            pointLabels: { 
                                color: '#94A3B8', 
                                font: { size: 12, family: 'Inter', weight: '500' } 
                            },
                            ticks: { 
                                display: false, 
                                backdropColor: 'transparent',
                                color: 'rgba(148, 163, 184, 0.5)'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: { 
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(11, 17, 32, 0.95)',
                            titleColor: '#38BDF8',
                            bodyColor: '#F1F5F9',
                            borderColor: '#38BDF8',
                            borderWidth: 1,
                            padding: 12,
                            titleFont: { family: 'Inter', weight: '600' },
                            bodyFont: { family: 'Inter' },
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed.r + ' 分';
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
